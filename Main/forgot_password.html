<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html>
    <head>
        <title>Анимированное переключение формы | Демонстрация для сайта RUSELLER.COM</title>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
        <link rel="stylesheet" type="text/css" href="css/style.css" />
  </head>
    <body>
		<div class="wrapper">
			<h1>Анимированное переключение формы</h1>
			<h2>Демонстрация: нажмите на <span>оранжевую ссылку</span> чтобы увидеть эффект в действии</h2>
			<div class="content">
				<div id="form_wrapper" class="form_wrapper">
					<form class="register">
						<h3>Регистрация</h3>
						<div class="column">
							<div>
								<label>Имя:</label>
								<input type="text" />
								<span class="error">Ошибка</span>
							</div>
							<div>
								<label>Фамилия:</label>
								<input type="text" />
								<span class="error">Ошибка</span>
							</div>
							<div>
								<label>Сайт:</label>
								<input type="text" value="http://"/>
								<span class="error">Ошибка</span>
							</div>
						</div>
						<div class="column">
							<div>
								<label>Имя пользователя:</label>
								<input type="text"/>
								<span class="error">Ошибка</span>
							</div>
							<div>
								<label>Email:</label>
								<input type="text" />
								<span class="error">Ошибка</span>
							</div>
							<div>
								<label>Пароль:</label>
								<input type="password" />
								<span class="error">Ошибка</span>
							</div>
						</div>
						<div class="bottom">
							<div class="remember">
								<input type="checkbox" />
								<span>Отправлять мне обновления</span>
							</div>
							<input type="submit" value="Зарегистрироваться" />
							<a href="index.html" rel="login" class="linkform">Вы уже зарегистрировались? Войдите здесь</a>
							<div class="clear"></div>
						</div>
					</form>
					<form class="login active">
						<h3>Вход</h3>
						<div>
							<label>Имя пользователя:</label>
							<input type="text" />
							<span class="error">Ошибка</span>
						</div>
						<div>
							<label>Пароль: <a href="forgot_password.html" rel="forgot_password" class="forgot linkform">Забыли пароль?</a></label>
							<input type="password" />
							<span class="error">Ошибка</span>
						</div>
						<div class="bottom">
							<div class="remember"><input type="checkbox" /><span>Оставаться в системе</span></div>
							<input type="submit" value="Войти"></input>
							<a href="register.html" rel="register" class="linkform">Вы еще не загеристрировались? Присоединяйтесь</a>
							<div class="clear"></div>
						</div>
					</form>
					<form class="forgot_password">
						<h3>Восстановление пароля</h3>
						<div>
							<label>Имя пользователя или Email:</label>
							<input type="text" />
							<span class="error">Ошибка</span>
						</div>
						<div class="bottom">
							<input type="submit" value="Отправить пароль"></input>
							<a href="index.html" rel="login" class="linkform">Вдруг вспомнили пароль? Войдите здесь</a>
							<a href="register.html" rel="register" class="linkform">Вы еще не загеристрировались? Присоединяйтесь</a>
							<div class="clear"></div>
						</div>
					</form>
				</div>
				<div class="clear"></div>
			</div>
		</div>
		

		<!-- JavaScript -->
		<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js"></script>
		<script type="text/javascript">
			$(function() {
					//Контейнер форм (включает все формы)
				var $form_wrapper	= $('#form_wrapper'),
					//Текущая форма - имеет класс active
					$currentForm	= $form_wrapper.children('form.active'),
					//Ссылка на изменение формы
					$linkform		= $form_wrapper.find('.linkform');
						
				//Получаем высоту и ширину каждой формы и сохраняем их
				$form_wrapper.children('form').each(function(i){
					var $theForm	= $(this);
					//Решение проблемы с выводом при использовании fadeIn fadeOut
					if(!$theForm.hasClass('active'))
						$theForm.hide();
					$theForm.data({
						width	: $theForm.width(),
						height	: $theForm.height()
					});
				});
				
				//Устанавливаем высоту и ширину контейнера (такие же как и у текущей формы)
				setWrapperWidth();
				
				/*
				Нажатие на ссылке (событие смены форм) в форме приводит к скрытию текущей формы.
				Контейнер анимирует изменение ширины и высоты к новым значениям.
				После завершения анимации выводится новая форма
				*/
				$linkform.bind('click',function(e){
					var $link	= $(this);
					var target	= $link.attr('rel');
					$currentForm.fadeOut(400,function(){
						//Удаляем класс active с текущей формы
						$currentForm.removeClass('active');
						//Новая текущая форма
						$currentForm= $form_wrapper.children('form.'+target);
						//Анимируем изменения контейнера
						$form_wrapper.stop()
									 .animate({
										width	: $currentForm.data('width') + 'px',
										height	: $currentForm.data('height') + 'px'
									 },500,function(){
										//Новая форма получает класс active
										$currentForm.addClass('active');
										//Выводим новую форму
										$currentForm.fadeIn(400);
									 });
					});
					e.preventDefault();
				});
				
				function setWrapperWidth(){
					$form_wrapper.css({
						width	: $currentForm.data('width') + 'px',
						height	: $currentForm.data('height') + 'px'
					});
				}
				
				/*
				Для демонстрации кнопки отключены.
				Если отправлять форму, нужно проверить, какая форма отправляется 
				и присвоить класс active той форме, которая будет выводиться после отправки.
				*/
				$form_wrapper.find('input[type="submit"]')
							 .click(function(e){
								e.preventDefault();
							 });	
			});
        </script>
    </body>
</html>